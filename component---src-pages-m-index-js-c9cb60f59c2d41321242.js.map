{"version":3,"sources":["webpack://blog-space/./src/components/MHeader.js","webpack://blog-space/./src/styles/mHeader.module.css","webpack://blog-space/./src/components/MLayout.js","webpack://blog-space/./src/styles/mTrend.module.css","webpack://blog-space/./src/pages/m/index.js","webpack://blog-space/./src/utils/tool.js","webpack://blog-space/./src/assets/avatar.jpeg"],"names":["navs","key","title","to","useState","showMenu","setShowMenu","className","src","avatarImg","alt","onClick","role","map","item","pageTitle","siteTitle","children","articleTitle","articleFt","articleTime","data","allMdx","allWorks","site","markdowns","edges","tmp","JSON","parse","stringify","node","dataType","workList","trends","concat","slice","sort","a","b","Date","frontmatter","date","useEffect","fixDeviceView","siteMetadata","id","tags","tag","split","slug","brief","length","renderMd","imgs","images","techs","style","marginTop","renderWorks","exports","n","isBrowser","window","navigator","userAgent","toLowerCase","match","pathname","sUserAgent","location","isMobileDevice","isMobileView","test","href","origin","search","replace"],"mappings":"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","file":"component---src-pages-m-index-js-c9cb60f59c2d41321242.js","sourcesContent":["import React, { useState } from 'react'\nimport { Link } from 'gatsby'\nimport avatarImg from '../assets/avatar.jpeg'\nimport {\n  header,\n  headerBar,\n  icon,\n  topInfo,\n  topClose,\n  topMenu,\n  closeOff,\n  closeActive,\n  divider,\n} from '../styles/mHeader.module.css'\n\nconst navs = [\n  {\n    key: 'Home',\n    title: '首页',\n    to: '/',\n  },\n  {\n    key: 'Blog',\n    title: '笔记',\n    to: '/m/blog',\n  },\n  {\n    key: 'Works',\n    title: '练习',\n    to: '/m/works',\n  },\n]\n\nfunction MHeader() {\n  const [showMenu, setShowMenu] = useState(false)\n\n  const handleToggleMenu = () => {\n    setShowMenu(!showMenu)\n  }\n\n  return (\n    <header className={header}>\n      <div className={headerBar}>\n        <div className={icon}>\n          <img src={avatarImg} alt=\"avatar\" />\n        </div>\n        <div className={topInfo}>\n          <div>Ushio</div>\n          <span>\n            To reveal all mysteries and doubts, have the lust for life.\n          </span>\n        </div>\n        <div className={topClose} onClick={handleToggleMenu} role=\"button\">\n          <div className={showMenu ? closeActive : closeOff}></div>\n        </div>\n        {showMenu && (\n          <div className={topMenu}>\n            <ul>\n              {navs.map(item => {\n                return (\n                  <li key={item.key}>\n                    <Link to={item.to}>{item.title}</Link>\n                    <div className={divider}></div>\n                  </li>\n                )\n              })}\n            </ul>\n          </div>\n        )}\n      </div>\n    </header>\n  )\n}\n\nexport default MHeader\n","// extracted by mini-css-extract-plugin\nexport var header = \"mHeader-module--header--3VpTH\";\nexport var headerBar = \"mHeader-module--header-bar--29-4_\";\nexport var icon = \"mHeader-module--icon--E8UBq\";\nexport var topInfo = \"mHeader-module--top-info--32z56\";\nexport var topClose = \"mHeader-module--top-close--1Mo6L\";\nexport var topMenu = \"mHeader-module--top-menu--1kKFv\";\nexport var closeOff = \"mHeader-module--close-off--1-nuD\";\nexport var closeActive = \"mHeader-module--close-active--1zALV\";\nexport var divider = \"mHeader-module--divider--31zPb\";","import React from 'react'\nimport MHeader from './MHeader'\n\nfunction Layout({ pageTitle, siteTitle, children }) {\n  return (\n    <div className=\"page\">\n      <title>\n        {pageTitle} - {siteTitle}\n      </title>\n\n      <MHeader />\n\n      {children}\n    </div>\n  )\n}\n\nexport default Layout\n","// extracted by mini-css-extract-plugin\nexport var sectionTitle = \"mTrend-module--section-title--q7qcP\";\nexport var trendList = \"mTrend-module--trend-list--4ddBE\";\nexport var trendItem = \"mTrend-module--trend-item--3apeV\";\nexport var articleTitle = \"mTrend-module--article-title--Spi9a\";\nexport var articleBrief = \"mTrend-module--article-brief--3Kf8-\";\nexport var articleFt = \"mTrend-module--article-ft--3dduM\";\nexport var articleTime = \"mTrend-module--article-time--3IaLk\";\nexport var articleWorks = \"mTrend-module--article-works--3Q6Kp\";\nexport var worksImg = \"mTrend-module--works-img--1rS28\";\nexport var articleTag = \"mTrend-module--article-tag--1_CYb\";\nexport var worksTag = \"mTrend-module--works-tag--1gJui\";","import React, { useEffect } from 'react'\nimport { graphql, Link } from 'gatsby'\nimport Layout from '../../components/MLayout'\n\nimport { fixDeviceView } from '../../utils/tool'\n\nimport {\n  sectionTitle,\n  trendList,\n  trendItem,\n  articleTitle,\n  articleBrief,\n  articleFt,\n  articleTime,\n  articleTag,\n  articleWorks,\n  worksImg,\n  worksTag,\n} from '../../styles/mTrend.module.css'\n\nfunction IndexPage({ data }) {\n  const { allMdx, allWorks, site } = data\n\n  const markdowns = allMdx.edges.map(item => {\n    const tmp = JSON.parse(JSON.stringify(item))\n    tmp.node.dataType = 'md'\n    return { ...tmp }\n  })\n  const workList = allWorks.edges.map(item => {\n    const tmp = JSON.parse(JSON.stringify(item))\n    tmp.node.dataType = 'json'\n    return { ...tmp }\n  })\n\n  const trends = markdowns\n    .concat(workList)\n    .slice(0, 7)\n    .sort(\n      (a, b) =>\n        new Date(b.node.frontmatter.date) - new Date(a.node.frontmatter.date)\n    )\n\n  useEffect(() => {\n    fixDeviceView()\n  }, [])\n\n  const renderMd = frontmatter => {\n    const tags = frontmatter.tag.split(',')\n\n    return (\n      <article>\n        <div className={articleTitle}>\n          <span>发布了笔记《 </span>\n          <Link to={frontmatter.slug} className={articleTitle}>\n            {frontmatter.title}\n          </Link>\n          <span> 》</span>\n        </div>\n        <p className={articleBrief}>{frontmatter.brief}</p>\n        <div className={articleFt}>\n          {tags.length > 0 && (\n            <div className={articleTag}>\n              {tags.map(item => {\n                return <span key={item}>{item}</span>\n              })}\n            </div>\n          )}\n          <div className={articleTime}>{frontmatter.date}</div>\n        </div>\n      </article>\n    )\n  }\n\n  const renderWorks = frontmatter => {\n    const imgs = frontmatter.images.split(',')\n    const tags = frontmatter.techs.split(',')\n\n    return (\n      <article>\n        <p className={articleTitle}>\n          <span>添加了练习《 </span>\n          <Link to={frontmatter.slug}>{frontmatter.title}</Link>\n          <span> 》</span>\n        </p>\n\n        {imgs.length > 0 && (\n          <div className={articleWorks}>\n            {imgs.map(item => {\n              return (\n                <div className={worksImg} key={item}>\n                  <img src={`images/${item}`} alt=\"works\" />\n                </div>\n              )\n            })}\n          </div>\n        )}\n\n        <div className={articleFt} style={{ marginTop: 10 }}>\n          {tags.length > 0 && (\n            <div className={worksTag}>\n              {tags.map(item => {\n                return <span key={item}>{item}</span>\n              })}\n            </div>\n          )}\n          <div className={articleTime}>{frontmatter.date}</div>\n        </div>\n      </article>\n    )\n  }\n\n  return (\n    <Layout pageTitle=\"Home\" siteTitle={site.siteMetadata.title}>\n      <main>\n        <div className={sectionTitle}>动态</div>\n\n        <div>\n          <ul className={trendList}>\n            {trends.map(({ node }) => {\n              const { frontmatter } = node\n\n              return (\n                <li className={trendItem} key={node.id}>\n                  {node.dataType === 'md'\n                    ? renderMd(frontmatter)\n                    : renderWorks(frontmatter)}\n                </li>\n              )\n            })}\n          </ul>\n        </div>\n      </main>\n    </Layout>\n  )\n}\n\nexport default IndexPage\n\nexport const query = graphql`\n  query HOME_M_QUERY {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n\n    allMdx(sort: { fields: frontmatter___date, order: DESC }, limit: 7) {\n      edges {\n        node {\n          frontmatter {\n            title\n            date(formatString: \"YYYY-MM-DD HH:mm\")\n            slug\n            brief\n            tag\n          }\n          id\n        }\n      }\n    }\n\n    allWorks(sort: { fields: frontmatter___date, order: DESC }, limit: 7) {\n      edges {\n        node {\n          frontmatter {\n            title\n            date\n            images\n            techs\n            slug\n          }\n          id\n        }\n      }\n    }\n  }\n`\n","exports.formatMaxCount = function (n) {\n  return n > 999 ? '999+' : n + ''\n}\n\nconst isBrowser = () => typeof window !== 'undefined'\n\nexports.checkMobileDevice = function () {\n  if (!isBrowser()) return;\n\n  var sUserAgent = window.navigator.userAgent.toLowerCase()\n  return sUserAgent.match(\n    /(ipad|ipod|iphone os|midp|ucweb|android|windows ce|windows mobile)/i\n  )\n}\n\nexports.fixDeviceView = function () {\n  if (!isBrowser()) return;\n\n  var sUserAgent = window.navigator.userAgent.toLowerCase()\n  var pathname\n  if (window.location.pathname === '/') {\n    pathname = ''\n  } else {\n    pathname = window.location.pathname\n  }\n\n  var isMobileDevice = sUserAgent.match(\n      /(ipad|ipod|iphone os|midp|ucweb|android|windows ce|windows mobile)/i\n    ),\n    isMobileView = /^\\/m\\/*.*$/i.test(window.location.pathname)\n  if (isMobileDevice && !isMobileView) {\n    // PC跳转移动端\n    window.location.href =\n      window.location.origin + '/m' + pathname + window.location.search\n  } else if (!isMobileDevice && isMobileView) {\n    // 移动端跳PC\n    window.location.href =\n      window.location.origin +\n      window.location.pathname.replace('/m', '') +\n      window.location.search\n  }\n}\n","export default __webpack_public_path__ + \"static/avatar-a245f5a141ee7672fd4950d820091a5b.jpeg\";"],"sourceRoot":""}